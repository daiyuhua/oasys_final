webpackJsonp([6],{"0uJ4":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),o=a.n(l),s={name:"baseform",data:function(){return{form:{workId:this.$store.state.user.workId,office:"",fullname:this.$store.state.user.fullname,reason:"",applyDate:"",applyDoc:""},applyDoc:[]}},methods:{onSubmit:function(){var e=this,t=new FormData;this.applyDoc.forEach(function(a){t.append("file",a.raw),console.info(a.raw),e.form.applyDoc+=a.raw.name,e.form.applyDoc+=","}),this.form.applyDoc=this.form.applyDoc.substring(0,this.form.applyDoc.lastIndexOf(",")),console.log(this.form.applyDoc),t.append("form",o()(this.form)),this.fileRequest("oasys-back-end/resignApply",t).then(function(t){console.log(t),!0===t.data?e.$message.success("提交成功！"):e.$message.error("提交失败")})},onFileSubmit:function(){var e=this;this.fileRequest("oasys-back-end/resignApply",this.form.applyDoc).then(function(t){t?e.$message.success("上传成功"):e.$message.error("上传失败")})},handlePreview:function(e){console.log("file="+e)},handleRemove:function(e,t){console.log(e,t)},handleChange:function(e,t){this.applyDoc=t,console.log(this.applyDoc)}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"form-box"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"工号"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.workId,callback:function(t){e.$set(e.form,"workId",t)},expression:"form.workId"}},[e._v(e._s(e.form.workId))])],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.form.fullname,callback:function(t){e.$set(e.form,"fullname",t)},expression:"form.fullname"}},[e._v(e._s(e.form.fullname))])],1),e._v(" "),a("el-form-item",{attrs:{label:"申请时间"}},[a("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:e.form.applyDate,callback:function(t){e.$set(e.form,"applyDate",t)},expression:"form.applyDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门岗位"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.office,callback:function(t){e.$set(e.form,"office",t)},expression:"form.office"}},[a("el-option",{key:"002",attrs:{label:"行政岗位",value:"001"}}),e._v(" "),a("el-option",{key:"007",attrs:{label:"人事部门员工",value:"002"}}),e._v(" "),a("el-option",{key:"008",attrs:{label:"销售部门员工",value:"003"}}),e._v(" "),a("el-option",{key:"009",attrs:{label:"财务部门员工",value:"004"}}),e._v(" "),a("el-option",{key:"010",attrs:{label:"美术部门员工",value:"005"}}),e._v(" "),a("el-option",{key:"011",attrs:{label:"策划部门员工",value:"006"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"辞职原因"}},[a("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"申请附件"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"",multiple:!0,name:"file","on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-change":e.handleChange,"file-list":e.applyDoc,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")])],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("表单提交")]),e._v(" "),a("el-button",[e._v("取消")])],1)],1)],1)])])},staticRenderFns:[]},r=a("VU/8")(s,n,!1,null,null,null);t.default=r.exports},UEyF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("d1wj"),o={name:"resignCheck",data:function(){return{query:{address:"",name:"",pageIndex:1,size:0},keyword:null,tableData:[],multipleSelection:[],delList:[],editVisible:!1,addVisible:!1,pageTotal:0,total:0,size:5,page:1,form:{resignId:"",workId:"",fullname:"",office:"",status:"",reason:"",applyDate:"",applyDoc:[],applyDocUrl:[],employee:{fullname:""}},idx:-1,id:-1}},mounted:function(){this.getData()},methods:{getData:function(){var e=this,t="oasys-back-end/getApply?page="+this.page+"&size="+this.size+"&roleId="+this.$store.state.user.roleId;null!=this.keyword&&(t+="&keyword="+this.keyword),Object(l.c)(t).then(function(t){null!=t&&(e.tableData=t.data.data,console.log(e.tableData)),console.log(e.tableData),e.total=t.data.total,e.pageTotal=Math.ceil(e.total/e.size)})},handleDelete:function(e,t){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then(function(){var l=t;a.deleteRequest("oasys-back-end/deleteUser",l).then(function(t){t?(a.$message.success("删除成功"),a.tableData.splice(e,1)):a.$message.error("删除失败")})}).catch(function(){})},handleSelectionChange:function(e){this.multipleSelection=e},delAllSelection:function(){var e=this,t=this.multipleSelection.length,a="";this.delList=this.delList.concat(this.multipleSelection);for(var l=function(t){console.log(e.delList[t].workId),e.deleteRequest("oasys-back-end/deleteUser",e.delList[t]).then(function(l){l&&(a+=e.delList[t].workId+" ")}),e.$message.error("删除了"+a),e.multipleSelection=[],e.getData()},o=0;o<t;o++)l(o)},handleEdit:function(e,t){var a=this;this.idx=e,this.form=t,console.log("test="+this.form.applyDoc),null!=this.form.applyDoc&&(this.form.applyDocUrl=this.form.applyDoc.split(","),console.log("number="+this.form.applyDocUrl.length),this.form.applyDocUrl.forEach(function(e,t){a.form.applyDocUrl[t]="http://localhost:8080/oasys-back-end/documents/resignApply/"+a.form.resignId+"/"+e})),this.editVisible=!0},saveEdit:function(e){var t=this;this.form.status=e,"通过"===this.form.status?this.postRequest("oasys-back-end/applyResign",this.form).then(function(e){e?(t.editVisible=!1,t.$message.success("修改成功"),t.getData()):t.$message.error("修改失败")}):this.postRequest("oasys-back-end/applyResign",this.form).then(function(e){e&&(t.editVisible=!1,t.$message.success("修改成功"),t.getData())})},handlePageChange:function(e){this.page=e,this.getData()},sizeChange:function(e){this.size=e,this.getData()}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 基础表格\n                ")])],1)],1),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input",attrs:{placeholder:"请输入关键字",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getData()}}},[e._v("搜索")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"","header-cell-class-name":"table-header"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"workId",label:"工号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"全名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.employee.fullname))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"申请日期",align:"center",prop:"applyDate"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"未审核"===t.row.status?"warn":"通过"===t.row.status?"success":"未通过"===t.row.status?"danger":"warn"}},[e._v(e._s(t.row.status)+"\n                        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("审核\n                        ")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next ,->, total","page-count":e.pageTotal,"current-page":e.query.pageIndex,"page-size":e.query.size},on:{"current-change":e.handlePageChange,"size-change":e.sizeChange,"prev-click":e.handlePageChange,"next-click":e.handlePageChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"工号"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.workId,callback:function(t){e.$set(e.form,"workId",t)},expression:"form.workId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"全名"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.employee.fullname,callback:function(t){e.$set(e.form.employee,"fullname",t)},expression:"form.employee.fullname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门岗位"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.office,callback:function(t){e.$set(e.form,"office",t)},expression:"form.office"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"离职原因"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"申请时间"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.applyDate,callback:function(t){e.$set(e.form,"applyDate",t)},expression:"form.applyDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"申请材料"}},e._l(e.form.applyDocUrl,function(e){return a("el-empty",{key:e,attrs:{image:e,default:" ",description:" "}})}),1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.saveEdit("未通过")}}},[e._v("未通过")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.saveEdit("通过")}}},[e._v("通 过")])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(o,s,!1,function(e){a("wMbl")},"data-v-51a1e174",null);t.default=n.exports},ldn8:function(e,t,a){var l={"./resignApply.vue":"0uJ4","./resignCheck.vue":"UEyF"};function o(e){return a(s(e))}function s(e){var t=l[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}o.keys=function(){return Object.keys(l)},o.resolve=s,e.exports=o,o.id="ldn8"},wMbl:function(e,t){}});
//# sourceMappingURL=6.2d1ca95bc8f22854f557.js.map